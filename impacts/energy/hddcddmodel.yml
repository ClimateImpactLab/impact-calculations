timerate: year
climate:
  - tas-lo = tas * step(tas, 20, [1, 0])
  - tas-hi = tas * step(tas, 20, [0, 1])
  - tas-lo-poly-2 = tas-poly-2 * step(tas, 20, [1, 0])
  - tas-hi-poly-2 = tas-poly-2 * step(tas, 20, [0, 1])
  - tas-cdd-20
  - tas-cdd-20-poly-2
  - tas-hdd-20
  - tas-hdd-20-poly-2
models:
  - csvvs: "social/parameters/energy/projection3/*.csvv"
    covariates:
      - incbin: [ -inf, 7.215, 7.744, 8.157, 8.495, 8.812, 9.095, 9.407, 9.782, 10.180, inf ]
      - climtas-cdd-20
      - climtas-hdd-20
      - climtas-cdd-20*incbin: [ -inf, 7.215, 7.744, 8.157, 8.495, 8.812, 9.095, 9.407, 9.782, 10.180, inf ]
      - climtas-hdd-20*incbin: [ -inf, 7.215, 7.744, 8.157, 8.495, 8.812, 9.095, 9.407, 9.782, 10.180, inf ]
    clipping: false
    description: Change in energy usage driven by a single day's mean temperature
    depenunit: kWh/pc
    specifications:
      tas-lo:
        description: Uninteracted term.
        indepunit: C
        functionalform: polynomial
        variable: tas-lo
      tas-hi:
        description: Uninteracted term.
        indepunit: C
        functionalform: polynomial
        variable: tas-hi
      hdd-20:
        description: Below 20C days.
        indepunit: C
        functionalform: polynomial
        variable: tas-hdd-20
      cdd-20:
        description: Above 20C days.
        indepunit: C
        functionalform: polynomial
        variable: tas-cdd-20
    calculation:
      - Sum:
        - YearlyApply:
            model: tas-lo
        - YearlyApply:
            model: tas-hi
        - YearlyApply:
            model: hdd-20
        - YearlyApply:
            model: cdd-20
      - Rebase
