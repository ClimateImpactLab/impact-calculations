timerate: month
climate: [ tas, edd, prmm ] # , prmm-poly-2, prmm-poly-3, prmm-poly-4
models:
  - csvvs: "social/parameters/agriculture/soy/*.csvv"
    within-season: "social/baselines/agriculture/world-combo-201710-growing-seasons-soy.csv"
    clipping: false
    covariates:
      - loggdppc
      - seasonaltas
      - irshare
      - irshare^2
    calculation:
      - Sum:
          - YearlySumIrregular:
              specification:
                description: Temperature-driven yield rate for soybeans
                depenunit: log kg / Ha
                indepunit: C
                variables:
                  gdd: edd.bin(8) - edd.bin(30)
                  kdd: edd.bin(30)
                functionalform: coefficients
          - YearlySumIrregular:
              specification:  
                description: Precipitation-driven yield rate for soybeans
                depenunit: log kg / Ha
                indepunit: mm
                variable: prmm
                functionalform: polynomial
      - Rebase
      - Exponentiate